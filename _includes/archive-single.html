{% if post.header.teaser %}
  {% capture teaser %}{{ post.header.teaser }}{% endcapture %}
{% else %}
  {% assign teaser = site.teaser %}
{% endif %}

{% if post.id %}
  {% assign title = post.title | markdownify | remove: "<p>" | remove: "</p>" %}
{% else %}
  {% assign title = post.title %}
{% endif %}

<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    {% if teaser %}
      <div class="archive__item-teaser-wrapper">
        <img src="{{ teaser }}" alt="{{ title }}" class="archive__item-teaser">
      </div>
    {% else %}
      <div class="archive__item-teaser-wrapper archive__item-teaser--default">
        <span>{{ title | slice: 0 }}</span>
      </div>
    {% endif %}

    <div class="archive__item-content">
      <h2 class="archive__item-title no_toc" itemprop="headline">
        <a href="{{ post.url | relative_url }}" rel="permalink">{{ title }}</a>
      </h2>

      <p class="page__meta">
        {% if post.date %}
          <span class="page__meta-date">
            <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
            <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%Y-%m-%d" }}</time>
          </span>
        {% endif %}
        {% if post.series %}
          <span class="page__meta-series">
            <i class="fas fa-fw fa-layer-group" aria-hidden="true"></i>
            {{ post.series }}
          </span>
        {% endif %}
      </p>

      {% if post.excerpt %}
        <p class="archive__item-excerpt" itemprop="description">{{ post.excerpt | markdownify | strip_html | truncate: 80 }}</p>
      {% endif %}
    </div>
  </article>
</div>

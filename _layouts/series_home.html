---
layout: archive
---

{{ content }}

{% assign series_groups = site.series | group_by: "series" %}
{% assign gradients = "linear-gradient(135deg, #667eea 0%, #764ba2 100%)|linear-gradient(135deg, #f093fb 0%, #f5576c 100%)|linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)|linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)|linear-gradient(135deg, #fa709a 0%, #fee140 100%)|linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)" | split: "|" %}

<div class="series-velog">
  {% for group in series_groups %}
    {% if group.name != "" %}
      {% assign sorted_posts = group.items | sort: "series_order" %}
      {% assign first_post = sorted_posts | first %}
      {% assign gradient_index = forloop.index0 | modulo: 6 %}
      <div class="series-velog__card" data-series="{{ forloop.index }}">
        <div class="series-velog__header" data-toggle="{{ forloop.index }}">
          {% if first_post.header.teaser %}
            <div class="series-velog__thumbnail" style="background-image: url('{{ first_post.header.teaser }}')"></div>
          {% else %}
            <div class="series-velog__thumbnail" style="background: {{ gradients[gradient_index] }}">
              <span class="series-velog__thumbnail-icon">{{ group.name | slice: 0 }}</span>
            </div>
          {% endif %}
          <div class="series-velog__info">
            <h3 class="series-velog__title">{{ group.name }}</h3>
            <span class="series-velog__count">{{ group.items.size }}편의 시리즈</span>
          </div>
          <span class="series-velog__arrow" data-arrow="{{ forloop.index }}">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
        </div>
        <div class="series-velog__body" data-panel="{{ forloop.index }}">
          <div class="series-carousel">
            <button class="series-carousel__btn series-carousel__btn--prev" data-carousel-prev="{{ forloop.index }}" aria-label="이전">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <div class="series-carousel__track" data-carousel-track="{{ forloop.index }}">
              {% for post in sorted_posts %}
                <a href="{{ post.url | relative_url }}" class="series-carousel__card">
                  {% if post.header.teaser %}
                    <div class="series-carousel__card-img" style="background-image: url('{{ post.header.teaser }}')"></div>
                  {% else %}
                    <div class="series-carousel__card-img" style="background: {{ gradients[gradient_index] }}">
                      <span class="series-carousel__card-num">{{ post.series_order }}</span>
                    </div>
                  {% endif %}
                  <div class="series-carousel__card-body">
                    <span class="series-carousel__card-order">{{ post.series_order }}편</span>
                    <h4 class="series-carousel__card-title">{{ post.title }}</h4>
                    {% if post.excerpt %}
                      <p class="series-carousel__card-excerpt">{{ post.excerpt | strip_html | truncate: 60 }}</p>
                    {% endif %}
                  </div>
                </a>
              {% endfor %}
            </div>
            <button class="series-carousel__btn series-carousel__btn--next" data-carousel-next="{{ forloop.index }}" aria-label="다음">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
          </div>
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>

<script>
(function() {
  // Accordion toggle
  var toggles = document.querySelectorAll('[data-toggle]');
  toggles.forEach(function(toggle) {
    toggle.addEventListener('click', function() {
      var index = this.getAttribute('data-toggle');
      var panel = document.querySelector('[data-panel="' + index + '"]');
      var arrow = document.querySelector('[data-arrow="' + index + '"]');
      var card = this.closest('.series-velog__card');
      var isOpen = panel.classList.contains('open');

      document.querySelectorAll('.series-velog__body').forEach(function(p) { p.classList.remove('open'); });
      document.querySelectorAll('.series-velog__card').forEach(function(c) { c.classList.remove('active'); });
      document.querySelectorAll('.series-velog__arrow').forEach(function(a) { a.classList.remove('rotated'); });

      if (!isOpen) {
        panel.classList.add('open');
        card.classList.add('active');
        arrow.classList.add('rotated');
      }
    });
  });

  // Carousel navigation
  var scrollAmount = 240;

  document.querySelectorAll('[data-carousel-prev]').forEach(function(btn) {
    btn.addEventListener('click', function(e) {
      e.stopPropagation();
      var index = this.getAttribute('data-carousel-prev');
      var track = document.querySelector('[data-carousel-track="' + index + '"]');
      track.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
    });
  });

  document.querySelectorAll('[data-carousel-next]').forEach(function(btn) {
    btn.addEventListener('click', function(e) {
      e.stopPropagation();
      var index = this.getAttribute('data-carousel-next');
      var track = document.querySelector('[data-carousel-track="' + index + '"]');
      track.scrollBy({ left: scrollAmount, behavior: 'smooth' });
    });
  });

  // Touch swipe support
  document.querySelectorAll('.series-carousel__track').forEach(function(track) {
    var startX = 0;
    var scrollStart = 0;

    track.addEventListener('touchstart', function(e) {
      startX = e.touches[0].pageX;
      scrollStart = this.scrollLeft;
    }, { passive: true });

    track.addEventListener('touchmove', function(e) {
      var diff = startX - e.touches[0].pageX;
      this.scrollLeft = scrollStart + diff;
    }, { passive: true });
  });
})();
</script>
